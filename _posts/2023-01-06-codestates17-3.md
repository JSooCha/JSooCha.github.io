---
title: 스트림
excerpt: Stream
categories: Java
tags: [codestates, Java]
toc: true
toc_sticky: true
author_profile: true
sidebar_main: true
published : false
---

## 스트림(Stream)
- 배열, 컬렉션의 저장 요소를 하나씩 참조하여, 람다식으로 처리할 수 있도록 해주는 반복자
  - 다양한 데이터 소스(List, Set, Map, 배열 등)로부터 스트림을 만들어, 이를 표준화된 방법으로 다룰 수 있음
    - 데이터 소스에 관계없이 하나의 통합된 방식으로 데이터 가공/처리 가능
  - 데이터 소스를 다루는 풍부한 메서드 제공
  - 다량의 데이터에 복잡한 연산을 수행하면서도, 가독성과 재사용성이 높은 코드를 작성 가능
    - 기존 for문, Iterator는 코드가 길고 복잡해질 수 있음
- 선언형 프로그래밍(Declarative Programming) 방식으로 데이터 처리 가능
  - 직관적인 코드 작성 가능
  - [명령형 프로그래밍 vs 선언형 프로그래밍](https://jsoocha.github.io/java/codestates69-2/)

```java
//Iterator를 사용한 반복 처리
public class PrintNumberOperator {
    public static void main(String[] args) {
        List<Integer> list = Arrays.asList(1, 2, 3);
        Iterator<Integer> it = list.iterator();
        while (it.hasNext()) {
            int num = it.next();
            System.out.print(num);
        }
    }
}
//스트림을 사용한 반복 처리
public class PrintNumberOperatorByStream {
    public static void main(String[] args) {
        List<Integer> list = Arrays.asList(1, 2, 3);
        Stream<Integer> stream = list.stream();
        stream.forEach(System.out::print);
    }
}
```
```java
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.stream.Stream;

public class StreamOperator {
    public static void main(String[] args) {

        // ArrayList
        List<String> fruitList = new ArrayList<>();
        fruitList.add("자바 ");
        fruitList.add("java ");

        // 배열
        String[] fruitArray = {"자바 ", "java "};

        // 각각 스트림 생성
        Stream<String> ListStream = fruitList.stream();
        Stream<String> ArrayStream = Arrays.stream(fruitArray);

        // 출력
        ListStream.forEach(System.out::print);
        ArrayStream.forEach(System.out::print);
    }
}
//자바 java 자바 java
```
- forEach() 메서드는 데이터 소스의 각 요소를 순회하면서 람다식 안에 정의된 어떤 명령을 실행하는 데 사용하는 최종연산자

### 특징
#### 스트림 처리 과정은 생성, 중간 연산, 최종 연산 세 단계의 파이프라인으로 구성
- 중간 연산을 생략하고 곧바로 최종연산으로 넘어가는 두 단계 구성도 가능

![image](https://github.com/JSooCha/JSooCha.github.io/assets/90169862/7a1bfa42-d2c3-4626-8905-f382c11ad860)
- 데이터 소스를 일원화하여 작업하기 위해 스트림 생성
- 최종 처리를 위한 중간 연산 수행
  - 필터링, 매핑, 정렬 등
  - 중간 연산의 결과는 또 다른 스트림이므로, 계속 연결하여 연산 수행 가능
- 중간 연산이 완료된 스트림을 최종적으로 처리하는 최종 연산 후, 스트림은 닫히고 모든 데이터 처리가 완료됨
  - 총합, 평균, 카운팅 등
  - 스트림의 요소를 소모하면서 연산을 수행하므로, 최종적으로 단 한 번의 연산만 가능

#### 스트림은 원본 데이터 소스를 변경하지 않음(read-only)
- 스트림은 오직 데이터를 읽어올 수만 있고, 데이터에 대한 변경과 처리는 생성된 스트림 안에서만 수행
  - 원본 데이터가 스트림에 의해 임의로 변경되거나 데이터가 손상되는 일을 방지
#### 스트림은 일회용(onetime-only)
- 추가적인 작업이 필요하다면, 다시 스트림을 생성해야 함
#### 스트림은 내부 반복자(Internal Iterator)
- 외부 반복자(External Iterator)
  - 개발자가 코드로 직접 컬렉션의 요소를 반복해서 가져오는 코드 패턴
    - 인덱스를 사용하는 ```for문```, ```Iterator```를 사용하는 ```while문``` 등
  - 스트림은 반대로 컬렉션 내부에 데이터 요소 처리 방법(람다식)을 주입하여 요소를 반복처리

![image](https://github.com/JSooCha/JSooCha.github.io/assets/90169862/6bc959b8-a291-46a0-9c76-037b71fd3b07)
- 외부 반복자 : 요소가 필요할 때마다 순차적으로 컬렉션에서 필요한 요소들을 불러옴 
- 내부반복자 : 데이터 처리 코드만 컬렉션 내부로 주입해주어, 그 안에서 모든 데이터 처리가 이뤄지도록 함
  - 효율적인 데이터 처리 가능


### 스트림 생성

#### 배열 스트림 생성
- Arrays 클래스의 ```stream()``` 또는 Stream 클래스의 ```of()``` 사용
- Arrays.stream()
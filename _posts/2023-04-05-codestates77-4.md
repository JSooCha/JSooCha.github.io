---
title: VPC
excerpt: VPC
categories: Spring
tags: [codestates, Spring]
toc: true
toc_sticky: true
author_profile: true
sidebar_main: true
published : false
---
## VPC(Virtual Private Cloud)
- 클라우드 내 프라이빗 공간을 제공함으로써, 클라우드를 퍼블릭과 프라이빗 영역으로 논리적으로 분리할 수 있게 함
- VPC를 분리함으로써 확장성을 가질 수 있고, 네트워크에 대한 완전한 통제권을 가질 수 있음
  - VPC가 없었을 때는 클라우드에 있는 리소스를 격리 할 수 있는 방법이 없었음
    - 인스턴스들이 서로 거미줄처럼 연결되고, 인터넷과 연결되어 시스템의 복잡도를 엄청나게 끌어올릴 뿐만 아니라, 의존도를 높였음
    - 유지 및 관리에 많은 비용과 노력이 듦

### 구성 요소와 주요 용어
#### IP Address
- 컴퓨터 네트워크에서 장치들이 서로를 인식하고 통신을 하기 위해서 사용하는 특수한 번호
- IPv4, IPv6

##### IPv4
- 십진수의 형태는 보기 편하도록 변형한 것이고, 실제의 형태는 2진수 8자리의 형태, 즉 각 8bit(비트)씩 총 32bit로 구성
- 각 8bit를 Octet이라고 부르며, .으로 구분
  - IPv4는 4개의 Octet(옥텟)으로 이루어져 있다고 할 수 있음
###### IP Address Class
- 이전에는 IPv4 주소에서 호스트가 연결되어 있는 특정 네트워크를 가리키는 8비트의 네트워크 영역(Network Address)과 해당 네트워크 내에서 호스트의 주소(Host Address)를 가리키는 나머지 영역을 구분하기 위해 클래스(Class) 사용했음
- A 클래스
  - Network Address	: 0-127
  - Host Address : 0-255
  - Host Address : 0-255
  - Host Address : 0-255
  - 0.0.0.0은 자체 네트워크를 의미하기 때문에 제외
  - 127.0.0.0 ~ 127.255.255.255는 자기 자신을 가리키기 위한 목적으로 예약된 IP주소이기 때문에 사용할 수 없음
- B 클래스
  - Network Address	: 128-191
  - Network Address : 0-255
  - Host Address : 0-255
  - Host Address : 0-255
- C 클래스
  - Network Address	: 192-223
  - Network Address : 0-255
  - Network Address : 0-255
  - Host Address : 0-255
- D와 E 클래스는 멀티캐스트용, 연구 개발을 위한 예약 IP이므로 보통 사용되지 않음

#### CIDR(Classless inter-domain routing; 사이더)
- 클래스 없는 도메인 간 라우팅 기법
- 1993년 도입되기 시작한 국제 표준의 IP주소 할당 방법으로, IP 클래스 방식을 대체
- 원하는 블록만큼 Network Address를 지정하여 운용 가능
- 172.16.0.0 / 16
  - /16 : 첫 16bit를 Network Address로 사용한다는 의미
  - 총 2^16인 65,536개의 IP주소를 사용할 수 있는 커다란 네트워크 블록을 이러한 방식으로 표시
    - CIDR 블록, IP 주소의 수
    - /28, 16
    - /24, 254
    - /20, 4094
    - /18, 16382
    - 16, 65536

#### 서브넷(Subnet)
- 서브네트워크(Subnetwork)의 줄임말
- IP 네트워크의 논리적인 하위 부분
- 하나의 네트워크를 여러 개로 나눌 수 있음
- VPC를 사용하면 필요에 따라 다양한 서브넷 생성 가능
  - 퍼블릭 서브넷 : 인터넷을 통해 연결 할 수 있는 서브넷
  - 프라이빗 서브넷 : 인터넷을 연결하지 않고, 보안을 유지하는 배타적인 서브넷
  - VPN only 서브넷 : 기업 데이터 센터와 VPC를 연결하는 서브넷
- VPC의 CIDR 블록을 이용해 정의되며, 최소 크기의 서브넷은 /28
  - 서브넷은 AZ당 최소 하나를 사용할 수 있고, 여러 개의 AZ에 연결되는 서브넷은 만들 수 없음

> AWS가 확보한 서브넷 중 처음 네 개의 IP주소와 마지막 IP주소는 인터넷 네트워킹을 위해 예약되어 있다. 서브넷에서 가용 IP주소를 계산할 때는 항상 이 부분을 기억해야 한다. 예를 들어, 10.0.0.0/24 체계의 CIDR 블록이 있는 서브넷에서 10.0.0.0, 10.0.0.1, 10.0.02, 10.0.0.3, 10.0.0.255 등 5개의 IP주소는 예약 되어 있다.

#### 라우팅 테이블(Routing Table)
- 트래픽의 전송 방향을 결정하는 라우트와 관련된 규칙을 담은 테이블
- 목적지를 향한 최적의 경로로 데이터 패킷을 전송하기 위한 모든 정보를 담고 있음
  - 하나의 지점에서 또 다른 지점으로 가기 위한 모든 정보를 제공하기 위한 테이블
  - ex) 특정 VPC의 서브넷이 라우팅 테이블에 인터넷 게이트웨이(VPC와 인터넷 간 통신을 가능하게 하는 구성요소)를 포함하고 있다면, 해당 서브넷은 인터넷 액세스 권한 및 정보를 가짐
- 각각의 서브넷은 항상 라우팅 테이블을 가지고 있어야 하며, 하나의 라우팅 테이블 규칙을 여러 개의 서브넷에 연결하는 것도 가능함
- 서브넷을 생성하고 별도의 라우팅 테이블을 생성하지 않으면 클라우드가 자동으로 VPC의 메인 라우팅 테이블을 연결함

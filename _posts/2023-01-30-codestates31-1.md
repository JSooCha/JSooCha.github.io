---
title: 데이터베이스
excerpt: DB, SQL, RDBMS, NoSQL
categories: DB
tags: [codestates, DB]
toc: true
toc_sticky: true
author_profile: true
sidebar_main: true
published : true
---

## 데이터베이스

### In-Memory
- 프로그램이 실행될 때에만 데이터가 존재하는 저장 방식
- 프로그램의 실행에 의존
  - 프로그램이 종료될 때 데이터도 사라짐 (휘발성)
  - 예기치 못한 상황으로부터 데이터를 보호할 수 없고, 종료된 프로그램에서 데이터를 받아올 수 없음

### File I/O
- 파일을 통해 데이터 저장
  - 엑셀 시트, CSV 등 
    - 해당 파일 형태는 대용량의 데이터를 저장하기 위한 목적이 아님
- 데이터를 불러올 때마다 매번 전체 파일을 읽어야 함
  - 복잡하고 데이터량이 많아질수록 비효율적
    - 손상된 파일, 여러개의 파일을 동시에 다뤄야 하는 경우

### 관계형 데이터베이스 (RDBMS, Relational DataBase Management System)
- 사전에 정의한 테이블의 구조, 데이터 타입에 알맞은 데이터만 삽입 가능
- 행(row)과 열(column)로 구성된 테이블에 데이터 저장
  - 열(column) : 하나의 속성에 대한 정보 
  - 행(row) : 각 열의 데이터 형식에 맞는 데이터 
- 한 번에 여러 개의 테이블을 가질 수 있음
- 특정한 형식을 지키므로, 데이터 사용 시 수월
  - 테이블 간의 관계를 직관적으로 파악 가능
- SQL을 통해 데이터 관리
- MySQL, Oracle, SQLite, PostgresSQL, MariaDB 등

### 비관계형 데이터베이스 (NoSQL, Not Only SQL)
- 데이터 구조가 고정되어 있지 않은 데이터베이스
  - NoSQL은 관계형 데이터베이스가 아닌 데이터베이스를 지칭
- 테이블 대신, 데이터를 다른 형태로 저장
- 스키마가 무조건 없는 것은 아님
  - schema on read : 데이터를 읽어올 때, 스키마에 따라 데이터를 읽어옴
    - 읽어올 때에만 스키마가 사용된다고 하여, 데이터 사용 시 정해진 방식이 없다는 것은 아님
    - 데이터 입력 방식이 데이터를 읽어올 때에 영향을 미침
    - 관계형 데이터베이스 : 데이터 입력 시, 스키마에 맞게 입력
- 비구조화 쿼리 언어에 특화

#### NoSQL 구성
- Key-Value 타입 : 속성을 Key-Value의 쌍으로 나타내는 데이터를 배열로 저장하는 데이터베이스
  - Key : 속성 이름
  - Value : 속성에 연결된 값 
  - Redis, Dynamo 등
- 문서형(Document) 데이터베이스 : 데이터를 문서화하여 저장하는 데이터베이스
  - JSON과 유사한 형식의 데이터를 문서화하여 저장
  - 각 문서는 하나의 속성에 대한 데이터를 가지고 있고, 컬렉션으로 묶어 관리
  - MongoDB 등
- Wide-Column 데이터베이스 : 데이터베이스의 열(column)에 대한 데이터를 집중적으로 관리하는 데이터베이스
  - 각 열에는 key-value 형식으로 데이터가 저장되고, 열 패밀리(column families)라고 하는 열의 집합체 단위로 데이터 처리 가능
  - 하나의 행에 많은 열을 포함할 수 있어, 유연성이 높음
    - 데이터 처리에 필요한 열을 유연하게 선택할 수 있어, 규모가 큰 데이터 분석에 주로 사용
  - Cassandra, HBase 등
- 그래프(Graph) 데이터베이스 : 그래프와 비슷한 형식으로 데이터 간의 관계를 구성하는 데이터베이스
  - 노드(nodes)에 속성별(entities)로 데이터 저장
    - 각 노드 간 관계는 선(edge)으로 표현
  - Neo4J, InfiniteGraph 등

<br>

## SQL (Structured Query Language)
- 관계형 데이터베이스(RDBMS)에서 데이터 관리를 위해 설계된 프로그래밍 언어
  - MySQL, Oracle, SQLite, PostgreSQL 등 
  - 관계형 데이터베이스(RDBMS)에서만 사용 가능
- 데이터베이스에 쿼리를 보내 데이터를 읽거나 삽입 가능

### 쿼리(query)
- 저장된 데이터를 필터링하기 위한 질의문

<br>

## SQL 기반 데이터베이스(RDBMS) vs. NoSQL 데이터베이스

### 데이터 저장(Storage)
- RDBMS : SQL을 이용해 데이터를 테이블에 저장 
  - 미리 작성된 스키마에 알맞게 저장해야 함
- NoSQL : key-value, document, wide-column, graph 등의 방식으로 데이터 저장

### 스키마(Schema)
- RDBMS : SQL을 사용하려면, 고정된 형식의 스키마가 필요 
  - 처리하려는 데이터 속성별로 열(column)에 대한 정보를 미리 정해두어야 함
  - 스키마는 나중에 변경할 수 있지만, 데이터베이스 전체를 수정하거나 오프라인(down-time)으로 전환해야 함
- NoSQL : 관계형 데이터베이스보다 동적으로 스키마의 형태를 관리 가능
  - 행 추가 시 즉시 새로운 열을 추가할 수 있고, 모든 열(속성)에 대한 데이터를 반드시 입력하지 않아도 됨

### 쿼리(Querying)
- RDBMS : 테이블의 형식과 테이블 간의 관계에 맞춰 데이터 요청 
  - 구조화된 쿼리 언어(SQL) 사용
- NoSQL : 데이터 그룹 자체를 조회하는 것에 초점을 둠 
  - 구조화되지 않은 쿼리 언어로도 데이터 요청 가능 
    - UnQL(UnStructured Query Language) 라고도 불림

### 확장성(Scalability)
- RDBMS : 일반적으로 수직적으로 확장
  - 높은 메모리, CPU를 사용하는 확장 
  - 데이터베이스가 하드웨어의 성능을 많이 이용하므로  비용이 많이 듦
  - 여러 서버에 걸쳐서 데이터베이스의 관계를 정의할 수 있지만, 매우 복잡하고 시간이 많이 소모됨
- NoSQL : 수평적으로 확장
  - 보다 값싼 서버 증설, 또는 클라우드 서비스 이용하는 확장
  - 서버를 추가적으로 구축하면, 많은 트래픽을 보다 편리하게 처리 가능
  - 저렴한 범용 하드웨어나 클라우드 기반의 인스턴스에 NoSQL 데이터베이스를 호스팅할 수 있어, 수직적 확장에 비해 비용이 저렴함

<br>

## 데이터베이스 선택

NoSQL 기반 비관계형 데이터베이스가 확장성, 속도면에서 더 뛰어나지만, 고차원으로 구조화된 SQL 기반의 데이터베이스가 더 좋은 성능을 보여주는 경우도 있음 

### SQL 기반 관계형 데이터베이스
- 데이터베이스의 ACID 성질을 준수해야 하는 경우
  - SQL은 데이터베이스와의 상호작용 방식을 정확하게 규정할 수 있기 때문에, 데이터 처리 시의 예외적인 상황을 줄이고, 데이터베이스의 무결성을 보호 가능
  - 전자 상거래 및 모든 금융 서비스에서는 반드시 ACID 를 준수해야 함

- 데이터가 구조적이고 일관적인 경우
  - 규모가 많은 서버를 필요로 하지 않고 일관된 데이터를 사용하는 경우에 자주 사용
    - 다양한 데이터 유형과 높은 트래픽을 지원하도록 설계된 NoSQL 데이터베이스를 사용해야만 하는 이유가 없음

### NoSQL 기반 비관계형 데이터베이스
- 데이터의 구조가 거의, 전혀 없는 대용량의 데이터를 저장하는 경우
  - 대부분 저장할 수 있는 데이터의 유형에 제한이 없음
  - 언제든지 데이터의 새 유형을 추가 가능

- 클라우드 컴퓨팅 및 저장공간을 최대한 활용하는 경우
  - 클라우드 기반으로 데이터베이스를 구축하면, 저렴한 비용의 솔루션을 제공받을 수 있음
  - 데이터베이스의 확장성이 중요하다면, 쉽게 확장 가능

- 빠르게 서비스를 구축하는 과정에서 데이터 구조를 자주 업데이트 하는 경우
  - 스키마를 미리 준비할 필요가 없으므로 빠른 개발에 매우 유리
    - e.g. 시장에 빠르게 프로토타입을 출시해야 하는 경우
  - down-time 없이 데이터 구조를 자주 업데이트 해야 하는 경우, 스키마를 매번 수정해야 하는 RDBMS 보다 적합한 데이터베이스
    - down-time : 데이터베이스 서버를 오프라인으로 전환하여 데이터 처리를 진행하는 작업 시간

